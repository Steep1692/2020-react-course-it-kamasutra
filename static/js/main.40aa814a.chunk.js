(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{144:function(e,t,n){e.exports=n(234)},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){e.exports={header:"HeaderContainer_header__2oTYS"}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return E}));var a=n(5),r=n.n(a),i=n(10),u=n(4),c=n(8),o=function(){return c.a.get("auth/me")},s=function(e){return c.a.post("auth/login",e)},l=function(){return c.a.delete("auth/login")},f=n(45),d=n(88),p={email:null,login:null,id:null,isAuth:!1},m=function(e){return{type:"auth/SET_AUTH_DATA",data:e}},h=function(e){return{type:"auth/SET_IS_AUTH",flag:e}},v=function(){return function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,i,u,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n=e.sent,0===(a=n.data).resultCode&&(i=a.data,u=i.id,c=i.login,s=i.email,t(m({id:u,login:c,email:s})),t(h(!0)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(e){s().then((function(t){var n=t.data;if(0===n.resultCode){var a=n.data,r=a.id,i=a.login,u=a.email;e(m({id:r,login:i,email:u})),e(h(!0))}})).catch((function(){e(Object(f.a)("login",{_error:d.nointernet}))}))}},E=function(){return function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:n=p.isAuth,t(m({id:p.id,login:p.login,email:p.email})),t(h(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"auth/SET_AUTH_DATA":return Object(u.a)({},e,{},a);case"auth/SET_IS_AUTH":return Object(u.a)({},e,{isAuth:a.flag});default:return e}}},234:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(43),u=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(149);var c=n(31),o=n(32),s=n(34),l=n(33),f=(n(150),n(151),n(53)),d=n.n(f),p=n(15),m=function(e){var t=e.login,n=e.id,a=e.isAuth,i=e.logout,u="/profile/".concat(n);return r.a.createElement("header",{className:d.a.header},r.a.createElement("div",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/White_flag_icon.svg/1200px-White_flag_icon.svg.png",alt:"Logotype"}))),r.a.createElement("div",{className:d.a.blockRight},a&&r.a.createElement("div",null,r.a.createElement("a",{href:u},t)," - ",r.a.createElement("button",{onClick:i},"Logout")),!a&&r.a.createElement(p.b,{to:"/login"},"Login")))},h=n(16),v=n(22),g=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.authMe()}},{key:"render",value:function(){var e=this.props,t=e.login,n=e.id,a=e.logout;return r.a.createElement(m,{login:t,id:n,logout:a})}}]),n}(r.a.Component),E=Object(h.b)((function(e){var t=e.auth;return{login:t.login,id:t.id,isAuth:t.isAuth}}),{authMe:v.a,logout:v.d})(g),b=n(89),O=n.n(b),T=n(19),_=n(36),I=r.a.lazy((function(){return n.e(7).then(n.bind(null,318))})),y=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,317))})),S=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,316))})),w=r.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,319))})),k=function(){var e=function(){return r.a.createElement(S,null)};return r.a.createElement("div",{className:O.a.content},r.a.createElement(a.Suspense,{fallback:_.a},r.a.createElement(T.b,{exact:!0,path:"/",render:e}),r.a.createElement(T.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(T.b,{path:"/profile/:userId?",render:e}),r.a.createElement(T.b,{path:"/dialogs",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(T.b,{path:"/users",render:function(){return r.a.createElement(I,null)}})))},A=n(91),j=n.n(A),x=n(56),N=n.n(x),L=n(57),F=n.n(L),C=function(e){var t=e.linkItem,n=t.to,a=t.name;return r.a.createElement(p.b,{to:n,className:F.a.navLinkItem,activeClassName:F.a.active},a)},D=function(e){var t=e.state.links.map((function(e,t){return r.a.createElement("li",{className:N.a.listItem,key:t},r.a.createElement(C,{linkItem:e}))}));return r.a.createElement("nav",{className:N.a.nav},r.a.createElement("h3",null,"Navigation"),r.a.createElement("ul",null,t))},P=n(92),R=n.n(P),U=n(58),B=n.n(U),M=(n(46),n(61)),z=function(e){var t=e.friendItem,n=t.id,a=t.name,i="/profile/".concat(n);return r.a.createElement("div",{className:B.a.friendItem},r.a.createElement(p.b,{to:i},r.a.createElement("div",{className:B.a.wrapAvatar},r.a.createElement(M.a,null)),r.a.createElement("span",null,a)))},G=function(e){var t=e.state.friends.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(z,{friendItem:e}))}));return r.a.createElement("div",{className:R.a.friendsBlock},r.a.createElement("h3",null,"Friends"),r.a.createElement("ul",null,t))},W=Object(h.b)((function(e){var t=e.sidebarReducer;return{navBar:t.navBar,friendsBlock:t.friendsBlock}}),{})((function(e){var t=e.navBar,n=e.friendsBlock;return r.a.createElement("aside",{className:j.a.aside},r.a.createElement(D,{state:t}),r.a.createElement(G,{state:n}))})),H=n(4),V={isAppInitialized:!0,errors:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"app/SET-IS-APP-INITIALIZED":return Object(H.a)({},e,{isAppInitialized:a.flag});default:return e}},Z=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.authMe().then((function(){e.props.setIsAppInitialized(!0)}))}},{key:"render",value:function(){return this.props.isAppInitialized?r.a.createElement(p.a,null,r.a.createElement("div",{className:"main-wrap"},r.a.createElement(E,null),r.a.createElement(W,null),r.a.createElement(k,null))):r.a.createElement(_.a,null)}}]),n}(r.a.Component),K=Object(h.b)((function(e){return{isAppInitialized:e.app.isAppInitialized}}),{setIsAppInitialized:function(e){return{type:"app/SET-IS-APP-INITIALIZED",data:{flag:e}}},authMe:v.a})(Z),X=n(21),Y=n(67),q=n(77),$={navBar:{links:[{to:"/profile",name:"Profile"},{to:"/dialogs",name:"Messages"},{to:"/users",name:"Users"}]},friendsBlock:{friends:[{id:1,name:"Dmitry"},{id:2,name:"Ti"}]}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;t.type,t.data;return e},ee=n(83),te=n(94),ne=n(84),ae=Object(X.c)({profileReducer:Y.b,dialogsReducer:q.a,sidebarReducer:Q,usersReducer:ee.a,auth:v.b,app:J,form:ne.a}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.d,ie=Object(X.e)(ae,re(Object(X.a)(te.a)));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h.a,{store:ie},r.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(90),u=n.n(i);t.a=function(){return r.a.createElement("div",{className:u.a.preLoader},"LOADING...")}},46:function(e,t,n){e.exports=n.p+"static/media/profileAvatar.c9041f3f.png"},53:function(e,t,n){e.exports={header:"Header_header__hE6Vz",blockRight:"Header_blockRight__3_vq1"}},56:function(e,t,n){e.exports={nav:"Navbar_nav__3WIx8"}},57:function(e,t,n){e.exports={navLinkItem:"NavLinkItem_navLinkItem__mEIwt",active:"NavLinkItem_active__pi9Ng"}},58:function(e,t,n){e.exports={friendItem:"FriendItem_friendItem__1jmse",wrapAvatar:"FriendItem_wrapAvatar__101pr"}},61:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(93),u=n.n(i),c=n(46),o=n.n(c);t.a=function(e){var t=e.image,n=void 0===t?null:t;return r.a.createElement("div",{className:u.a.wrapAvatar},r.a.createElement("img",{src:n||o.a,alt:"Avatar"}))}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return E}));var a=n(5),r=n.n(a),i=n(10),u=n(23),c=n(4),o=n(8),s=function(e){return o.a.get("profile/".concat(e))},l=function(e){return o.a.get("profile/status/".concat(e))},f=function(e){return o.a.put("profile/status?status=".concat(e))},d="profile/ADD-POST",p={profile:null,status:"",posts:[{message:"I don't take this too seriously!",author:"Dmitry",likesCount:12},{message:"No way!",author:"Dmitry",likesCount:55}]},m=function(e){return{type:d,data:{postText:e}}},h=function(e){return{type:"profile/SET-USER-PROFILE",data:{profile:e}}},v=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e);case 2:a=t.sent,i=a.data,n(h(i));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:a=t.sent,i=a.data,n({type:"profile/SET-USER-STATUS",data:{status:i}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:a=t.sent,i=a.data,console.log(i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case d:var r=a.postText;return Object(c.a)({},e,{textareaValue:"",posts:[{id:5,message:r,author:"Dmitry",likesCount:5}].concat(Object(u.a)(e.posts))});case"profile/SET-USER-PROFILE":var i=a.profile;return Object(c.a)({},e,{profile:i});case"profile/SET-USER-STATUS":var o=a.status;return Object(c.a)({},e,{status:o});default:return e}}},77:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n(23),r=n(4),i={dialogs:[{name:"Ti",id:1,message:"What's the point?"},{name:"Kony",id:2,message:"Need this asap."}],dialog:{id:1,interlocutor:"Ti",messages:[{message:"This is rather a suggestive comment",author:"Dmitry"},{message:"You are lucky!",author:"Ti"},{message:"What's the point?",author:"Dmitry"}]}},u=function(e){return{type:"dialog/SEND-MESSAGE",data:{messageText:e}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,u=t.data;switch(n){case"dialog/SEND-MESSAGE":var c=u.messageText;return Object(r.a)({},e,{textareaValue:"",dialog:Object(r.a)({},e.dialog,{messages:[].concat(Object(a.a)(e.dialog.messages),[{message:c,author:"Dmitry"}])})});default:return e}}},8:function(e,t,n){"use strict";var a=n(87);t.a=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0"})},83:function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return I})),n.d(t,"b",(function(){return y}));var a=n(5),r=n.n(a),i=n(10),u=n(23),c=n(4),o=n(8),s=function(e){return o.a.post("/follow/".concat(e))},l=function(e){return o.a.delete("/follow/".concat(e))},f=function(e,t){return o.a.get("users?count=".concat(e,"&page=").concat(t))},d=function(e,t,n,a){return e.map((function(e){return e[t]===n?Object(c.a)({},e,{},a):e}))},p="users/FOLLOW",m={users:[],currentPage:1,itemsPerPage:5,totalItemsCount:0,isDataFetching:!1,isFollowingFetching:!1,followingFetchingList:[]},h=function(e){return{type:p,data:{id:e}}},v=function(e){return{type:"users/UNFOLLOW",data:{id:e}}},g=function(e){return{type:"users/SET-USERS",data:{users:e}}},E=function(e){return{type:"users/SET-CURRENT-PAGE",data:{page:e}}},b=function(e){return{type:"users/SET-DATA-FETCHING",data:{flag:e}}},O=function(e,t){return{type:"users/SET-IS-FOLLOWING-FETCHING",data:{flag:e,id:t}}},T=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O(!0,i)),e.prev=1,e.next=4,n(i);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:a(i),t(O(!1,i));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(n,s,h,e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(n,l,v,e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(i.a)(r.a.mark((function n(a){var i,u,c,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(b(!0)),n.next=3,f(e,t);case 3:i=n.sent,u=i.data,c=u.items,o=u.totalCount,a(b(!1)),a(g(c)),a({type:"users/SET-TOTAL-ITEMS-COUNT",data:{count:o}}),a(E(t));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case p:return Object(c.a)({},e,{},d(e.users,"id",a.id,{followed:!0}));case"users/UNFOLLOW":return Object(c.a)({},e,{},d(e.users,"id",a.id,{followed:!1}));case"users/SET-USERS":return Object(c.a)({},e,{users:a.users});case"users/SET-CURRENT-PAGE":return Object(c.a)({},e,{currentPage:a.page});case"users/SET-ITEMS-PER-PAGE":return Object(c.a)({},e,{itemsPerPage:a.count});case"users/SET-TOTAL-ITEMS-COUNT":return Object(c.a)({},e,{totalItemsCount:a.count});case"users/SET-DATA-FETCHING":return Object(c.a)({},e,{isDataFetching:a.flag});case"users/SET-IS-FOLLOWING-FETCHING":var r=a.flag,i=r?[].concat(Object(u.a)(e.followingFetchingList),[a.id]):e.followingFetchingList.filter((function(e){return e!==a.id}));return Object(c.a)({},e,{isFollowingFetching:r,followingFetchingList:Object(u.a)(i)});default:return e}}},88:function(e){e.exports=JSON.parse('{"nointernet":"No internet connection!"}')},89:function(e,t,n){e.exports={content:"Content_content__1r8zB"}},90:function(e,t,n){e.exports={form:"PreLoader_form__1KiUV"}},91:function(e,t,n){e.exports={aside:"SidebarContainer_aside__2ZOht"}},92:function(e,t,n){e.exports={friendsBlock:"FriendsBlock_friendsBlock__1O8cg"}},93:function(e,t,n){e.exports={wrapAvatar:"Avatar_wrapAvatar__luB4u"}}},[[144,2,3]]]);
//# sourceMappingURL=main.40aa814a.chunk.js.map